# AI项目规则管理系统 - 使用说明

## 🚀 快速开始

### 1. 查看项目状态
```bash
python auto_sync.py status
```

### 2. 立即同步规则文件
```bash
python auto_sync.py sync
```

### 3. 拉取最新规则
```bash
python rule_puller.py update
```

### 4. 查看规则文件状态
```bash
python rule_puller.py status
```

## 📋 主要功能

### 自动同步功能
- ✅ 每72小时自动同步到GitHub
- ✅ 自动检测本地更改并提交
- ✅ 自动推送到远程仓库
- ✅ 失败时自动重试（最多3次）

### 规则管理功能
- ✅ 自动拉取最新规则文件
- ✅ 智能比较文件内容
- ✅ 自动备份历史版本
- ✅ 支持强制更新

## 🔧 配置文件

### 同步配置 (sync_config.json)
```json
{
  "last_sync": "2025-11-14T01:43:57.242023",
  "sync_count": 1,
  "auto_sync_enabled": true,
  "sync_interval_hours": 72,
  "retry_count": 3,
  "retry_delay_seconds": 300
}
```

### 规则配置 (rule_config.json)
```json
{
  "last_update": "2025-11-14T01:43:57.242023",
  "current_version": "20251114_014357",
  "auto_sync": true,
  "sync_interval_hours": 72
}
```

## 📁 文件结构

```
.trae\rules\
├── project_rules.md          # 核心规则文件
├── README.md                 # 项目说明
├── docs.md                   # 详细文档
├── 使用说明.md               # 本使用说明
├── rule_puller.py            # 规则拉取脚本
├── auto_sync.py              # 自动同步脚本
├── setup_auto_sync.bat       # 自动设置脚本
├── sync_config.json          # 同步配置
├── rule_config.json          # 规则配置
├── auto_sync.log             # 同步日志
├── rule_update.log           # 规则更新日志
└── backups\                  # 备份目录
```

## 🎯 规则优先级说明

### 🔴 高优先级（必须遵守）
- 语法错误处理
- 编译错误处理
- 核心技术规范
- Git提交规范

### 🟡 中优先级（建议遵循）
- 代码格式规范
- 测试流程规范
- 文件命名规范
- 版本管理规范

### 🟢 低优先级（参考使用）
- 性能优化建议
- 可读性建议
- 工具配置建议

## 📝 常用命令

### 规则拉取器
```bash
# 更新规则文件
python rule_puller.py update

# 查看状态
python rule_puller.py status

# 强制更新
python rule_puller.py force
```

### 自动同步器
```bash
# 启动自动同步
python auto_sync.py start

# 停止自动同步
python auto_sync.py stop

# 查看状态
python auto_sync.py status

# 立即同步一次
python auto_sync.py sync
```

## 🔍 日志查看

### 查看同步日志
```bash
type auto_sync.log
```

### 查看规则更新日志
```bash
type rule_update.log
```

### 实时监控日志
```bash
tail -f auto_sync.log
```

## ⚠️ 注意事项

1. **Git配置**: 确保已正确配置Git用户名和邮箱
2. **网络连接**: 自动同步需要网络连接
3. **权限问题**: 确保有权限访问GitHub仓库
4. **备份重要**: 重要修改前建议手动备份

## 🆘 常见问题

### Q: 同步失败怎么办？
A: 检查网络连接和Git配置，查看日志文件获取详细信息

### Q: 如何修改同步间隔？
A: 编辑`sync_config.json`文件中的`sync_interval_hours`值

### Q: 如何关闭自动同步？
A: 运行`python auto_sync.py stop`或修改配置文件

### Q: 规则文件冲突怎么办？
A: 查看冲突处理原则，按照优先级层次解决

## 📞 支持

如有问题，请查看日志文件或提交Issue到GitHub仓库。

---

**祝您使用愉快！** 🎉