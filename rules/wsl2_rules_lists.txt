# WSL2ç›¸å…³é…ç½®è¦æ±‚

## æ–‡ä»¶å‘½åè§„èŒƒ
* **WSL2ç›¸å…³æ–‡ä»¶å‘½åè§„åˆ™**ï¼š
  - æ‰€æœ‰ä¸WSL2ç›¸å…³çš„æ–‡ä»¶å¿…é¡»åœ¨æ–‡ä»¶åä¸­åŒ…å«`wsl`æˆ–`wsl2`å…³é”®è¯
  - å¯¹äºæœªåŒ…å«è¿™äº›å…³é”®è¯çš„ç°æœ‰æ–‡ä»¶ï¼Œéœ€è¦æ›´åä¸º`åŸæ–‡ä»¶å_wsl2`æ ¼å¼
  - æ­¤è§„åˆ™é€‚ç”¨äºæ‰€æœ‰WSL2é…ç½®æ–‡ä»¶ã€è„šæœ¬ã€å·¥å…·å’Œæ–‡æ¡£

## WSL2çº¯å‡€å¼€å‘ç¯å¢ƒè§„åˆ™
### é«˜ä¼˜å…ˆçº§è§„èŒƒï¼ˆå¿…é¡»éµå®ˆï¼‰
* **ç¯å¢ƒé…ç½®**ï¼š
  - å¼€å‘ç¯å¢ƒç³»ç»Ÿç‰ˆæœ¬ï¼š${wsl-distro} '.\wsl-distro.info'ğŸ”´
    - ${wsl-distro}å˜é‡å€¼ä»`\.\wsl-distro.info`æ–‡ä»¶ä¸­è¯»å–
    - æ”¯æŒå€¼ï¼š`win11`(Win11ä¸“ä¸šç‰ˆ), `win11l`(Win11 LTSç‰ˆ), `win7u`(Win7ä¸“ä¸šç‰ˆ), `win2025`(Win Server 2025)
    - å½“${wsl-distro}ä¸ºä¸Šè¿°Windowsç‰ˆæœ¬æ—¶ï¼Œåœ¨WSL2ä¸­å®‰è£…Podmanç¯å¢ƒå¹¶è¿è¡Œ`podman-win-wsl2`é…ç½®
  - å¼€å‘ç¯å¢ƒè·¯å¾„ï¼š${wsl-devpath} '$HOME\\git_data\\${gitbranch}\'ğŸ”´
  - Windowså®¹å™¨ç¯å¢ƒï¼š`c:\${wsl-usr}\\git_data\\${gitbranch}`
  - Linux/WSLç¯å¢ƒï¼š`${HOME}/git_data/${gitbranch}`
  - é¡¹ç›®ä»£ç åŒæ­¥åˆ°æ­¤è·¯å¾„è¿›è¡Œç¼–è¯‘è°ƒè¯•
  - ç”¨æˆ·åé…ç½®ï¼š${wsl-usr} 'devman'ğŸ”´
  - å¯†ç é…ç½®ï¼š${wsl-pwd} 'devman'ğŸ”´
* **é¡¹ç›®ç¯å¢ƒé€‚é…è§„åˆ™**ï¼š
  - å¯¹äº${My_ProjectPath}é¡¹ç›®ï¼Œå¿…é¡»å…ˆæ£€æŸ¥project_rulesä¸­çš„WSL2è§„åˆ™å†è¿›è¡Œç¯å¢ƒåˆå§‹åŒ–ğŸ”´
  - å¦‚æœ${My_ProjectPath}ä¸­æœªé…ç½®wsl_distroå€¼ï¼Œå¿…é¡»æ£€æŸ¥é¡¹ç›®å·²æœ‰ä»£ç å†…å®¹åˆ¤æ–­é€‚åˆçš„è°ƒè¯•ç¯å¢ƒğŸ”´
  - å½“æ£€æµ‹åˆ°é¡¹ç›®ä¸ºWindowsç³»ç»Ÿä»£ç æ—¶ï¼Œå¿…é¡»åœ¨WSL2é»˜è®¤åˆ†å‘ç¯å¢ƒä¸­å®‰è£…Podmanï¼Œå¹¶åŠ è½½ä¸“ä¸ºWindowsç³»ç»Ÿé…ç½®çš„è°ƒè¯•å®¹å™¨ï¼Œå¯ä»¥ç›´æ¥æŸ¥æ‰¾åœ¨${PG_UtilWslManagementReadmePath}ç›®å½•ä¸­çš„wsl2éƒ¨ç½²è„šæœ¬ä¸­å…³äºwindowsç³»ç»Ÿä¸­podmançš„é…ç½®ï¼Œç¡®ä¿å®¹å™¨ä¸­å®‰è£…äº†å¿…è¦çš„å·¥å…·å’Œåº“ï¼Œå®¹å™¨åŠ è½½çš„é…ç½®æ–‡ä»¶ï¼Œå°†å…¶å¤åˆ¶åˆ°${My_ProjectPath}ä¸­å¯¹åº”çš„ç›®å½•ç»“æ„ä¸­ï¼Œæ— éœ€è‡ªå·±æ‰‹åŠ¨é…ç½®ï¼Œç„¶åå†éªŒè¯${My_ProjectPath}æ˜¯å¦å¯ä»¥è¿›è¡Œwsl2è¿æ¥ğŸ”´
  - ç¦æ­¢å°†Windowsç³»ç»Ÿä»£ç è¿æ¥åˆ°Linuxç±»å®¹å™¨ï¼Œä»¥ç¡®ä¿ä»£ç èƒ½å¤Ÿæ­£ç¡®ç¼–è¯‘æ‰§è¡ŒğŸ”´

### ä¸­ä¼˜å…ˆçº§è§„èŒƒï¼ˆé…ç½®è¯¦æƒ…ï¼‰
* **å®¹å™¨é…ç½®**ï¼š
  - å®¹å™¨é»˜è®¤ç«¯å£ï¼šRDP(4489), HTTP(4818), VNC(4777)ğŸŸ¡
  - å®¹å™¨é»˜è®¤å‡­æ®ï¼š${wsl-usr}/${wsl-pwd}ğŸŸ¡
* **ç¯å¢ƒä½¿ç”¨**ï¼š
  - æœ¬åœ°å‡†å¤‡${wsl-distro}å¼€å‘ç¯å¢ƒç”¨äºIDEå¯¹æ¥ğŸ”´
  - ç¼–è¯‘è°ƒè¯•æ—¶å°†${filename}å¤åˆ¶åˆ°${wsl-distro}ä¸­è¿›è¡Œè°ƒè¯•æˆ–ç¼–è¯‘ğŸ”´
  - ä¿è¯debugæˆ–ç¼–è¯‘ç¯å¢ƒç‹¬ç«‹å¹²å‡€ï¼Œä¸å—å®¿ä¸»æœºç¯å¢ƒé…ç½®æ±¡æŸ“ğŸ”´
* **ç¯å¢ƒé”€æ¯**ï¼š
  - ç”¨æˆ·è¾“å…¥del-${wsl-distro}æ—¶ä»WSLç¯å¢ƒä¸­é”€æ¯æ­¤ç”¨ä¾‹ğŸ”´
  - é”€æ¯å‰éœ€æ¯”è¾ƒ${wsl-distro}ä»£ç å’Œå®é™…é¡¹ç›®ä¸­åŒåä»£ç å†…å®¹æ˜¯å¦ä¸€è‡´ğŸ”´
  - å¦‚æœä¸ä¸€è‡´ï¼ŒæŒ‰æ–‡æœ¬ç‰ˆæœ¬æ§åˆ¶è§„åˆ™æ›´ååå¤åˆ¶åˆ°é¡¹ç›®ä¸­å†é”€æ¯${wsl-distro}ğŸ”´
  - å¦‚æœä¸€è‡´åˆ™ç›´æ¥é”€æ¯${wsl-distro}ğŸ”´
* **ç¯å¢ƒç®¡ç†**ï¼š
  - ç”¨æˆ·è¾“å…¥res-${wsl-distro}æ—¶ä»WSLç¯å¢ƒä¸­é‡å¯æ­¤ç”¨ä¾‹ğŸ”´
  - ç”¨æˆ·è¾“å…¥stop-${wsl-distro}æ—¶ä»WSLç¯å¢ƒä¸­åœç”¨æ­¤ç”¨ä¾‹ğŸ”´

### WSL2éƒ¨ç½²è„šæœ¬ä¸šåŠ¡è·¯å¾„
* **ä¸»è§„èŒƒé¡¹ç›®ä¸­å·²å»ºç«‹çš„WSL2éƒ¨ç½²è„šæœ¬**ï¼š
  - `..\..\Util\wsl_management\wsl_dev_manager.py` - WSLå¼€å‘ç¯å¢ƒç®¡ç†å™¨ï¼Œç”¨äºåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œé”€æ¯WSLå¼€å‘ç¯å¢ƒ
  - `..\..\Util\wsl_management\wsl_ide_integrator.py` - WSL IDEé›†æˆå·¥å…·ï¼Œç”¨äºä»£ç åŒæ­¥ã€ç¼–è¯‘å’Œæµ‹è¯•
  - `..\..\Util\wsl_management\wsl_dev_path_manager.py` - WSLå¼€å‘è·¯å¾„ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†å¼€å‘ç¯å¢ƒè·¯å¾„é…ç½®

### WSL2å®¹å™¨é…ç½®æ–‡ä»¶è·¯å¾„
* **ä¸»è§„èŒƒé¡¹ç›®ä¸­å·²å»ºç«‹çš„å®¹å™¨é…ç½®æ–‡ä»¶**ï¼š
  - `..\..\docker\podman-windockurr-wsl2-compose.yml` - Windowså®¹å™¨é…ç½®æ–‡ä»¶ï¼Œç”¨äºåœ¨WSL2ä¸­é€šè¿‡Podmanè¿è¡ŒWindowså¼€å‘å®¹å™¨
  - `..\..\docker\podman-winservercore-wsl2-compose.yml` - Windows Server Coreå®¹å™¨é…ç½®æ–‡ä»¶ï¼Œç”¨äºåœ¨WSL2ä¸­é€šè¿‡Podmanè¿è¡ŒWindows Serverå¼€å‘ç¯å¢ƒ
  - `..\..\docker\portainerEE-Compose_wsl2.yml` - Portainer EEç®¡ç†å·¥å…·é…ç½®æ–‡ä»¶ï¼Œç”¨äºç®¡ç†å®¹å™¨ç¯å¢ƒ

### WSL2ç¯å¢ƒé…ç½®æ–‡ä»¶è·¯å¾„
* **ä¸»è§„èŒƒé¡¹ç›®ä¸­å·²å»ºç«‹çš„WSLç¯å¢ƒé…ç½®æ–‡ä»¶**ï¼š
  - `..\..\wsl_config\wsl_config.json` - WSL2å¼€å‘ç¯å¢ƒä¸»é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ç¯å¢ƒå˜é‡ã€è·¯å¾„é…ç½®ã€å®¹å™¨ç«¯å£ç­‰è®¾ç½®
  - `..\..\wsl_config\wsl-distro.info` - WSL2å‘è¡Œç‰ˆä¿¡æ¯æ–‡ä»¶ï¼Œå®šä¹‰å½“å‰ä½¿ç”¨çš„Windowsç‰ˆæœ¬
  - `..\..\wsl_config\wsl_dev_manager.sh` - WSL2å¼€å‘ç¯å¢ƒç®¡ç†è„šæœ¬ï¼Œç”¨äºåˆ›å»ºã€ä½¿ç”¨ã€é”€æ¯WSLå¼€å‘ç¯å¢ƒ

### WSL2å·¥å…·è„šæœ¬ç›®å½•è·¯å¾„
* **ä¸»è§„èŒƒé¡¹ç›®ä¸­å·²å»ºç«‹çš„å·¥å…·è„šæœ¬ç›®å½•**ï¼š
  - `..\..\scripts` - åŒ…å«å„ç§WSL2ç›¸å…³å·¥å…·è„šæœ¬çš„ç›®å½•
  - ä¸»è¦è„šæœ¬åŒ…æ‹¬ï¼šbuild-image-tools_wsl2, check_readme_compliance_wsl2.py, check_readme_files_wsl2.ps1, dockerimage-gateway_wsl2, download-gateway_wsl2, register-docker-login_wsl2

### WSL2å®‰è£…ä¸æ£€æŸ¥å·¥å…·è·¯å¾„
* **ä¸»è§„èŒƒé¡¹ç›®ä¸­å·²å»ºç«‹çš„å®‰è£…ä¸æ£€æŸ¥å·¥å…·**ï¼š
  - `..\..\Util\setup_tools\install_podman_windows.py` - Podman Windowså®¹å™¨ç¯å¢ƒå®‰è£…è„šæœ¬ï¼Œç”¨äºåœ¨WSL2ç¯å¢ƒä¸­å®‰è£…å’Œé…ç½®Windowså¼€å‘å®¹å™¨
  - `..\..\Util\check_wsl2_rules.py` - WSL2å¼€å‘ç¯å¢ƒè§„åˆ™éªŒè¯æµ‹è¯•è„šæœ¬ï¼Œç”¨äºæ£€æŸ¥WSL2é…ç½®æ–‡ä»¶å®Œæ•´æ€§ã€ç¯å¢ƒå˜é‡è®¾ç½®ã€è·¯å¾„é…ç½®ç­‰
  - `..\..\installers\install_mcp_servers_wsl2.bat` - MCPæœåŠ¡å™¨å®‰è£…è„šæœ¬ï¼Œç”¨äºåœ¨Windowsç¯å¢ƒä¸­å®‰è£…MCPæœåŠ¡å™¨
  - `..\..\installers\install_podman_windows_wsl2.sh` - Podman Windowså®‰è£…è„šæœ¬ï¼Œç”¨äºåœ¨WSL2ç¯å¢ƒä¸­å®‰è£…Podman
  - `..\..\installers\setup_auto_sync_wsl2.bat` - è‡ªåŠ¨åŒæ­¥è®¾ç½®è„šæœ¬ï¼Œç”¨äºé…ç½®ä»£ç è‡ªåŠ¨åŒæ­¥åŠŸèƒ½

> ğŸ“– **è¯¦ç»†è¯´æ˜æ–‡æ¡£**ï¼šè¯·å‚è€ƒ [`wsl2_dev_environment_guide.md`](wsl2_dev_environment_guide.md) è·å–å®Œæ•´çš„ä½¿ç”¨æŒ‡å—ã€æœ€ä½³å®è·µå’Œæ•…éšœæ’é™¤ä¿¡æ¯ã€‚
> 
> âš¡ **å¿«é€Ÿå‚è€ƒå¡**ï¼šè¯·æŸ¥çœ‹ [`wsl2_quick_reference.md`](wsl2_quick_reference.md) è·å–å¸¸ç”¨å‘½ä»¤å’Œé…ç½®é€ŸæŸ¥ã€‚